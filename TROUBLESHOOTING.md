# Решение проблем

## Ошибка: "group chat was upgraded to a supergroup chat"

### Проблема
Если вы видите ошибку:
```
Bad Request: group chat was upgraded to a supergroup chat
```

Это означает, что ваша группа была преобразована в супергруппу, и её ID изменился.

### Решение

1. **Добавьте бота в группу/супергруппу** (если еще не добавлен)

2. **Получите новый ID:**
   - Отправьте боту команду `/getid` в группе
   - Скопируйте новый ID (он будет начинаться с `-100`)

3. **Обновите .env файл:**
   ```env
   GROUP_ID=-1001234567890  # Новый ID супергруппы
   ```

4. **Перезапустите бота:**
   ```bash
   docker-compose restart
   ```

### Как узнать ID группы

**Способ 1: Через бота**
1. Добавьте бота в группу
2. Отправьте команду `/getid`
3. Бот покажет ID группы

**Способ 2: Через другого бота**
- Используйте [@userinfobot](https://t.me/userinfobot)
- Добавьте его в группу
- Он покажет ID группы

**Способ 3: Через веб-версию Telegram**
1. Откройте группу в веб-версии Telegram
2. Посмотрите URL - ID будет в адресной строке

### Важно

- ID супергруппы всегда начинается с `-100`
- ID обычной группы начинается с `-`
- После преобразования группы в супергруппу старый ID больше не работает

## Другие частые проблемы

### Бот не отправляет сообщения

1. **Проверьте права бота:**
   - Бот должен быть администратором группы
   - Или иметь права на отправку сообщений

2. **Проверьте ID группы:**
   - Убедитесь, что ID правильный (отрицательное число)
   - Используйте `/getid` для проверки

3. **Проверьте логи:**
   ```bash
   docker-compose logs -f
   ```

### Бот не запускается

1. **Проверьте .env файл:**
   ```bash
   cat .env
   ```
   - Убедитесь, что BOT_TOKEN и GROUP_ID установлены

2. **Проверьте валидность токена:**
   - Токен должен начинаться с цифры и двоеточия
   - Формат: `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`

3. **Проверьте логи:**
   ```bash
   docker-compose logs
   ```

### Ошибки парсинга

1. **Проверьте доступность URL:**
   ```bash
   curl https://status.bitrix24.ru/
   ```

2. **Проверьте интернет-соединение**

3. **Увеличьте таймаут в .env:**
   ```env
   REQUEST_TIMEOUT=30
   ```

## Получение помощи

Если проблема не решена:
1. Проверьте логи: `docker-compose logs -f`
2. Проверьте статус здоровья: `/health` в боте
3. Проверьте метрики: `/metrics` в боте


